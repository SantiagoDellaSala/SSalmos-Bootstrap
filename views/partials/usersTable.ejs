<div class="card">
  <div class="card-header bg-success text-white">Usuarios</div>
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>ID</th>
            <th>Usuario</th>
            <th>Correo Electrónico</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% users.forEach(user => { %>
          <tr>
            <td><%= user.id %></td>
            <td><%= user.name %></td>
            <td><%= user.email %></td>
            <td>
              <button class="btn btn-sm btn-info" onclick="location.href='/users/<%= user.id %>/edit'"><i class="fa-regular fa-pen-to-square"></i></button>
              <button class="btn btn-sm btn-primary" onclick="location.href='/users/<%= user.id %>/profile'"><i class="fa-solid fa-circle-info"></i></button>
              <button class="btn btn-sm btn-danger" onclick="confirmDelete('<%= user.id %>')"><i class="fa-solid fa-trash"></i></button>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>
<script>
  function confirmDelete(userId) {
    Swal.fire({
      title: '¿Estás seguro?',
      text: "No podrás revertir esto",
      icon: 'warning',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Sí, eliminarlo',
      cancelButtonText: 'Cancelar'
    }).then((result) => {
      if (result.isConfirmed) {
        window.location.href = `/users/${userId}/delete`;
      } else {
        window.location.href = '/admin';
      }
    });
  }
</script>